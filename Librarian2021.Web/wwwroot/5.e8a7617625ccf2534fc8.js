(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{WHHo:function(t,e,a){"use strict";a.r(e),a.d(e,"AuthorModule",function(){return K});var c=a("tyNb"),o=a("umRm"),i=a("+0xr"),r=a("M9IT"),n=a("Dh3D"),s=a("nYR2"),b=a("KMDt"),l=a("0IaG"),m=a("3Pt+"),d=a("fXoL"),u=a("iiaH"),h=a("73Qm"),f=a("Qzba"),p=a("Wp6s"),C=a("kmnG"),E=a("qFsG"),R=a("ofXK"),S=a("bTqV"),T=a("NFeN"),g=a("sYmb");function D(t,e){1&t&&(d.Ub(0,"mat-error"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc(" ",d.ic(2,1,"SYSTEM.RECORD.VALIDATION.NAME_REQUIRED")," "))}const U=function(){return{length:"64"}};function O(t,e){1&t&&(d.Ub(0,"mat-error"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc(" ",d.jc(2,1,"SYSTEM.RECORD.VALIDATION.LENGTH_MAX",d.oc(4,U)),""))}function w(t,e){1&t&&(d.Ub(0,"mat-error"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc(" ",d.ic(2,1,"SYSTEM.RECORD.VALIDATION.LAST_NAME_REQUIRED")," "))}function A(t,e){1&t&&(d.Ub(0,"mat-error"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc(" ",d.jc(2,1,"SYSTEM.RECORD.VALIDATION.LENGTH_MAX",d.oc(4,U)),""))}let I=(()=>{class t{constructor(t,e,a,c,o,i){this.dialogRef=t,this.dataService=a,this.translatorService=c,this.customEventService=o,this.fb=i,this.isRequesting=!1,this.subs=new b.a,this.hasError=(t,e)=>this.dataFRM.controls[t].hasError(e),this.data=e,console.log(this.data),this.createEmptyForm(),this.data.editMode&&this.getRecordById()}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}createEmptyForm(){this.dataFRM=this.fb.group({id:0,name:[null,m.q.compose([m.q.required,m.q.maxLength(64)])],lastName:[null,m.q.compose([m.q.required,m.q.maxLength(64)])]})}getRecordById(){this.isRequesting=!0,this.subs.add(this.dataService.getAny(`/api/author/${this.data.itemId}`).pipe(Object(s.a)(()=>{this.isRequesting=!1})).subscribe(t=>{this.author=t,this.dataFRM.patchValue(this.author)},t=>{}))}onClose(){this.dialogRef.close()}saveData(){console.log(this.dataFRM.value),(this.data.editMode?this.dataService.put("/api/author",this.dataFRM.value):this.dataService.post("/api/author",this.dataFRM.value)).pipe(Object(s.a)(()=>{this.isRequesting=!1})).subscribe(t=>{t&&(this.customEventService.publish("author-updated"),this.onClose())})}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(l.f),d.Ob(l.a),d.Ob(u.a),d.Ob(h.a),d.Ob(f.a),d.Ob(m.d))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-edit-author"]],decls:31,vars:18,consts:[["novalidate","","autocomplete","off",1,"main-form",3,"formGroup"],["appearance","outline"],["matInput","","type","text","formControlName","name","id","name","required","","maxlength","64",1,"form-control"],[4,"ngIf"],["matInput","","type","text","formControlName","lastName","id","lastName","required","","maxlength","64",1,"form-control"],["align","end"],["mat-raised-button","","color","primary","tabindex","1",3,"disabled","click"],["type","button","mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(d.Ub(0,"mat-dialog-content"),d.Ub(1,"form",0),d.Ub(2,"mat-card"),d.Ub(3,"mat-card-content"),d.Ub(4,"mat-form-field",1),d.Ub(5,"mat-label"),d.Ec(6),d.hc(7,"translate"),d.Tb(),d.Pb(8,"input",2),d.Cc(9,D,3,3,"mat-error",3),d.Cc(10,O,3,5,"mat-error",3),d.Tb(),d.Pb(11,"br"),d.Ub(12,"mat-form-field",1),d.Ub(13,"mat-label"),d.Ec(14),d.hc(15,"translate"),d.Tb(),d.Pb(16,"input",4),d.Cc(17,w,3,3,"mat-error",3),d.Cc(18,A,3,5,"mat-error",3),d.Tb(),d.Pb(19,"br"),d.Tb(),d.Ub(20,"mat-card-actions",5),d.Ub(21,"button",6),d.cc("click",function(){return e.saveData()}),d.Ub(22,"mat-icon"),d.Ec(23,"save"),d.Tb(),d.Ec(24),d.hc(25,"translate"),d.Tb(),d.Ub(26,"button",7),d.cc("click",function(){return e.onClose()}),d.Ub(27,"mat-icon"),d.Ec(28,"clear"),d.Tb(),d.Ec(29),d.hc(30,"translate"),d.Tb(),d.Tb(),d.Tb(),d.Tb(),d.Tb()),2&t&&(d.Cb(1),d.mc("formGroup",e.dataFRM),d.Cb(5),d.Fc(d.ic(7,10,"AUTHOR.FIELDS.NAME")),d.Cb(3),d.mc("ngIf",e.hasError("name","required")),d.Cb(1),d.mc("ngIf",e.hasError("name","maxlength")),d.Cb(4),d.Fc(d.ic(15,12,"AUTHOR.FIELDS.LAST_NAME")),d.Cb(3),d.mc("ngIf",e.hasError("lastName","required")),d.Cb(1),d.mc("ngIf",e.hasError("lastName","maxlength")),d.Cb(3),d.mc("disabled",!e.dataFRM.valid||e.isRequesting),d.Cb(3),d.Gc(" ",d.ic(25,14,"SYSTEM.RECORD.SAVE")," "),d.Cb(5),d.Gc(" ",d.ic(30,16,"SYSTEM.RECORD.CANCEL")," "))},directives:[l.d,m.r,m.m,m.f,p.a,p.c,C.c,C.f,E.b,m.c,m.l,m.e,m.p,m.h,R.l,p.b,S.a,T.a,C.b],pipes:[g.c],styles:[""]}),t})();var v=a("bv9b"),M=a("znSr"),y=a("FwHD");function N(t,e){1&t&&d.Pb(0,"mat-progress-bar",17)}function q(t,e){1&t&&(d.Ub(0,"mat-header-cell"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc("",d.ic(2,1,"AUTHOR.FIELDS.NAME")," "))}function H(t,e){if(1&t&&(d.Ub(0,"mat-cell"),d.Ec(1),d.Tb()),2&t){const t=e.$implicit;d.Cb(1),d.Hc(" ",t.name," ",t.lastName," ")}}function G(t,e){1&t&&(d.Ub(0,"mat-header-cell"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc("",d.ic(2,1,"AUTHOR.FIELDS.BOOKS")," "))}function L(t,e){if(1&t&&(d.Ub(0,"mat-cell"),d.Ec(1),d.Tb()),2&t){const t=e.$implicit;d.Cb(1),d.Gc(" ",t.books.length," ")}}function F(t,e){1&t&&(d.Ub(0,"mat-header-cell"),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc("",d.ic(2,1,"SYSTEM.RECORD.RECORD_STATE")," "))}function x(t,e){if(1&t&&(d.Ub(0,"mat-cell"),d.Ec(1),d.Tb()),2&t){const t=e.$implicit;d.Cb(1),d.Gc(" ",t.recordState," ")}}function k(t,e){1&t&&(d.Ub(0,"mat-header-cell",18),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc(" ",d.ic(2,1,"SYSTEM.RECORD.UPDATED_ON"),""))}function P(t,e){if(1&t&&(d.Ub(0,"mat-cell",19),d.Ec(1),d.hc(2,"timeAgo"),d.Tb()),2&t){const t=e.$implicit;d.Cb(1),d.Gc(" ",d.ic(2,1,t.updatedAt)," ")}}function Y(t,e){1&t&&(d.Ub(0,"mat-header-cell",20),d.Ec(1),d.hc(2,"translate"),d.Tb()),2&t&&(d.Cb(1),d.Gc(" ",d.ic(2,1,"SYSTEM.RECORD.ACTIONS")," "))}function V(t,e){if(1&t){const t=d.Vb();d.Ub(0,"mat-cell"),d.Ub(1,"button",21),d.cc("click",function(){d.wc(t);const a=e.$implicit;return d.gc().editAuthor(a.id,!0)}),d.Ub(2,"mat-icon"),d.Ec(3,"create"),d.Tb(),d.Tb(),d.Tb()}}function _(t,e){1&t&&d.Pb(0,"mat-header-row")}function j(t,e){1&t&&d.Pb(0,"mat-row")}function $(t,e){1&t&&d.Pb(0,"mat-row")}let Q=(()=>{class t{constructor(t,e,a){this.dataService=t,this.customEventService=e,this.dialog=a,this.isRequesting=!1,this.displayedColumns=["name","books","recordState","updatedAt","id"],this.subs=new b.a,this.authorList=[]}ngOnInit(){this.loadData(),this.subs.add(this.customEventService.on("author-updated").subscribe(()=>this.loadData()))}ngOnDestroy(){this.subs.unsubscribe()}loadData(){this.isRequesting=!0,this.subs.add(this.dataService.getAny("/api/author").pipe(Object(s.a)(()=>{this.isRequesting=!1})).subscribe(t=>{this.authorList=t,this.dataSource=new i.l(this.authorList),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,console.log(this.authorList)},t=>{}))}editAuthor(t,e=!1){const a=new l.c;a.data={itemId:t,editMode:e},a.autoFocus=!0,a.width="50%",this.dialog.open(I,a).afterClosed().subscribe(t=>{})}}return t.\u0275fac=function(e){return new(e||t)(d.Ob(u.a),d.Ob(f.a),d.Ob(l.b))},t.\u0275cmp=d.Ib({type:t,selectors:[["app-author-home"]],viewQuery:function(t,e){if(1&t&&(d.Ic(r.a,1),d.Ic(n.a,1)),2&t){let t;d.tc(t=d.dc())&&(e.paginator=t.first),d.tc(t=d.dc())&&(e.sort=t.first)}},decls:24,vars:5,consts:[["mode","query",4,"ngIf"],["matSort","",3,"dataSource"],["table",""],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","books"],["matColumnDef","recordState"],["matColumnDef","updatedAt"],["mat-sort-header","","fxHide","","fxShow.gt-md","",4,"matHeaderCellDef"],["fxHide","","fxShow.gt-md","",4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[4,"matNoDataRow"],["mat-fab","","color","primary",1,"fab-add-button",3,"click"],["mode","query"],["mat-sort-header","","fxHide","","fxShow.gt-md",""],["fxHide","","fxShow.gt-md",""],["mat-sort-header",""],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(d.Cc(0,N,1,0,"mat-progress-bar",0),d.Ub(1,"mat-table",1,2),d.Sb(3,3),d.Cc(4,q,3,3,"mat-header-cell",4),d.Cc(5,H,2,2,"mat-cell",5),d.Rb(),d.Sb(6,6),d.Cc(7,G,3,3,"mat-header-cell",4),d.Cc(8,L,2,1,"mat-cell",5),d.Rb(),d.Sb(9,7),d.Cc(10,F,3,3,"mat-header-cell",4),d.Cc(11,x,2,1,"mat-cell",5),d.Rb(),d.Sb(12,8),d.Cc(13,k,3,3,"mat-header-cell",9),d.Cc(14,P,3,3,"mat-cell",10),d.Rb(),d.Sb(15,11),d.Cc(16,Y,3,3,"mat-header-cell",12),d.Cc(17,V,4,0,"mat-cell",5),d.Rb(),d.Cc(18,_,1,0,"mat-header-row",13),d.Cc(19,j,1,0,"mat-row",14),d.Cc(20,$,1,0,"mat-row",15),d.Tb(),d.Ub(21,"button",16),d.cc("click",function(){return e.editAuthor()}),d.Ub(22,"mat-icon"),d.Ec(23,"add"),d.Tb(),d.Tb()),2&t&&(d.mc("ngIf",e.isRequesting),d.Cb(1),d.mc("dataSource",e.dataSource),d.Cb(17),d.mc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),d.Cb(1),d.mc("matRowDefColumns",e.displayedColumns))},directives:[R.l,i.k,n.a,i.c,i.e,i.b,i.g,i.j,i.h,S.a,T.a,v.a,i.d,i.a,n.b,M.a,i.f,i.i],pipes:[g.c,y.a],styles:[""]}),t})();const X={routes:c.c.forChild([{path:"",component:o.a,children:[{path:"",component:Q,children:[{path:"add",component:I},{path:"edit/:id",component:I}]},{path:"**",redirectTo:""}]}]),components:[Q,I]};var B=a("PCNd");let K=(()=>{class t{static forRoot(){return{ngModule:t,providers:[]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.Mb({type:t}),t.\u0275inj=d.Lb({imports:[[X.routes,B.a]]}),t})()}}]);